require=function t(e,i,s){function n(a,r){if(!i[a]){if(!e[a]){var h="function"==typeof require&&require;if(!r&&h)return h(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var _=i[a]={exports:{}};e[a][0].call(_.exports,function(t){var i=e[a][1][t];return n(i?i:t)},_,_.exports,t,e,i,s)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<s.length;a++)n(s[a]);return n}({bullet:[function(t,e,i){"use strict";cc._RFpush(e,"568746vKitKsozIv+Lu1U0q","bullet"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.enemy_set=cc.find("UI_ROOT").getComponent("game_scene").enemy_set,this.speed_x=0,this.speed_y=500},hit_enemy_test:function(t,e){if(0!==e.status_state)return!1;var i=e.node.getBoundingBoxToWorld();return t.intersects(i)},update:function(t){var e=this.speed_x*t,i=this.speed_y*t;if(this.node.x+=e,this.node.y+=i,this.node.y>=310)return void this.node.removeFromParent();for(var s=this.node.getBoundingBoxToWorld(),n=0;n<this.enemy_set.length;n++){var o=this.enemy_set[n].getComponent("enemy");if(this.hit_enemy_test(s,o))return o.on_bullet_hit(),void this.node.removeFromParent()}}}),cc._RFpop()},{}],enemy:[function(t,e,i){"use strict";cc._RFpush(e,"35e0aafFcRCPZEtGKVcpdwf","enemy"),cc.Class({"extends":cc.Component,properties:{bomb_anim:{type:cc.SpriteFrame,"default":[]},bomb_anim_duration:.1,enemy_skin:{type:cc.SpriteFrame,"default":[]},player_path:"UI_ROOT/player"},onLoad:function(){this.player=cc.find(this.player_path),this.anim=this.node.getChildByName("anim"),this.anim_com=this.anim.addComponent("frame_anim"),this.game_scene=cc.find("UI_ROOT").getComponent("game_scene"),this.speed_x=0,this.speed_y=-200,this.status_state=0},start:function(){this._set_enemy_idle()},_set_enemy_idle:function(){var t=9*Math.random()+1;t=Math.floor(t),t>=10&&(t=9),this.anim.getComponent(cc.Sprite).spriteFrame=this.enemy_skin[t-1]},_play_bomb_anim:function(){this.anim_com.sprite_frames=this.bomb_anim,this.anim_com.duration=this.bomb_anim_duration,this.anim_com.play_once(function(){this.remove_enemy()}.bind(this))},on_bullet_hit:function(){0===this.status_state&&(this.game_scene.add_score(),this.status_state=1,this._play_bomb_anim())},remove_enemy:function(){this.game_scene.remove_enemy(this.node),this.node.removeFromParent()},update:function(t){var e=this.speed_x*t,i=this.speed_y*t;if(this.node.x+=e,this.node.y+=i,1!==this.status_state){var s=this.player.getBoundingBoxToWorld(),n=this.node.getBoundingBoxToWorld();if(n.intersects(s)){var o=this.player.getComponent("player");o.on_hit_enemy()}var a=this.node.convertToWorldSpaceAR(cc.p(0,0));(a.x<-100||a.x>500||a.y<-100)&&this.remove_enemy()}}}),cc._RFpop()},{}],frame_anim:[function(t,e,i){"use strict";cc._RFpush(e,"fc828ObMtVBaLSu7vjBu+6v","frame_anim"),cc.Class({"extends":cc.Component,properties:{sprite_frames:{"default":[],type:cc.SpriteFrame},duration:.1,loop:!1,play_onload:!1},onLoad:function(){var t=this.node.getComponent(cc.Sprite);t||(t=this.node.addComponent(cc.Sprite)),this.sprite=t,this.is_playing=!1,this.play_time=0,this.is_loop=!1,this.end_func=null,this.play_onload&&(this.sprite.spriteFrame=this.sprite_frames[0],this.loop?this.play_loop():this.play_once(null))},play_once:function(t){this.play_time=0,this.is_playing=!0,this.is_loop=!1,this.end_func=t},play_loop:function(){this.play_time=0,this.is_playing=!0,this.is_loop=!0},stop_anim:function(){this.play_time=0,this.is_playing=!1,this.is_loop=!1},start:function(){},update:function(t){if(this.is_playing!==!1){this.play_time+=t;var e=Math.floor(this.play_time/this.duration);if(this.is_loop===!1){if(e>=this.sprite_frames.length)return this.sprite.spriteFrame=this.sprite_frames[this.sprite_frames.length-1],this.is_playing=!1,this.play_time=0,void(this.end_func&&this.end_func());this.sprite.spriteFrame=this.sprite_frames[e]}else{for(;e>=this.sprite_frames.length;)e-=this.sprite_frames.length,this.play_time-=this.duration*this.sprite_frames.length;this.sprite.spriteFrame=this.sprite_frames[e]}}}}),cc._RFpop()},{}],game_scene:[function(t,e,i){"use strict";cc._RFpush(e,"781c7NcKqFHJ7PgHO1sLnbp","game_scene"),cc.Class({"extends":cc.Component,properties:{groups_prefabs:{type:cc.Prefab,"default":[]}},onLoad:function(){this.enemy_set=[],this._gen_random_groups(),this.score_value=0,this.score=this.node.getChildByName("score").getComponent(cc.Label),this.score.string=""+this.score_value},add_score:function(){this.score_value++,this.score.string=""+this.score_value},remove_enemy:function(t){var e=this.enemy_set.indexOf(t);e>=0&&this.enemy_set.splice(e,1)},_gen_random_groups:function(){var t=Math.random()*this.groups_prefabs.length+1;t=Math.floor(t),t>=this.groups_prefabs.length&&(t=this.groups_prefabs.length);var e=cc.instantiate(this.groups_prefabs[t-1]);this.node.addChild(e);for(var i=0;i<e.children.length;i++)this.enemy_set.push(e.children[i]);e.x=200*(Math.random()-.5),e.y=100*Math.random()+500,this.scheduleOnce(this._gen_random_groups.bind(this),3*Math.random()+2)}}),cc._RFpop()},{}],home_scene:[function(t,e,i){"use strict";cc._RFpush(e,"3ab59vJ4QZNZJ61YSzIKvWa","home_scene"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.started=!1},on_start_click:function(){this.startd!==!0&&(this.started=!0,cc.director.loadScene("game_scene"))}}),cc._RFpop()},{}],player:[function(t,e,i){"use strict";cc._RFpush(e,"9fa1a1YT+xLW7Vgv8RYizWq","player"),cc.Class({"extends":cc.Component,properties:{bomb_anim:{type:cc.SpriteFrame,"default":[]},bomb_anim_duration:.1,plane_idle:{type:cc.SpriteFrame,"default":null},bullet_prefab:{type:cc.Prefab,"default":null}},onLoad:function(){this.anim=this.node.getChildByName("anim"),this.anim_com=this.anim.addComponent("frame_anim"),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){var e=t.getDelta();this.node.x+=e.x,this.node.y+=e.y}.bind(this),this.node),this.status_state=0,this.schedule(this.shoot_bullet.bind(this),.2)},shoot_bullet:function(){if(1!==this.status_state){var t=cc.instantiate(this.bullet_prefab);this.node.parent.addChild(t),t.x=this.node.x,t.y=this.node.y,t.setLocalZOrder(-1e3)}},_play_bomb_anim:function(){this.anim_com.sprite_frames=this.bomb_anim,this.anim_com.duraion=this.bomb_anim_duration,this.anim_com.play_once(this.new_life.bind(this))},on_hit_enemy:function(){0===this.status_state&&(this.status_state=1,this._play_bomb_anim())},new_life:function(){this.anim.scale=0,this.scheduleOnce(function(){this.anim.scale=1,this.status_state=2,this.anim.getComponent(cc.Sprite).spriteFrame=this.plane_idle;var t=cc.sequence([cc.fadeTo(.1,128),cc.fadeTo(.1,255)]),e=cc.repeatForever(t);this.anim.runAction(e)}.bind(this),1),this.scheduleOnce(function(){this.status_state=0,this.anim.opacity=255,this.anim.stopAllActions()}.bind(this),3)}}),cc._RFpop()},{}],star_sky:[function(t,e,i){"use strict";cc._RFpush(e,"dac22aJ9GJJu7EyWwrqsoH8","star_sky"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){this.bg_1=this.node.getChildByName("bg_1"),this.bg_2=this.node.getChildByName("bg_2"),this.speed=-100,this.bottom_bg=this.bg_1,this.node.setLocalZOrder(-2e3)},update:function(t){var e=t*this.speed;this.bg_1.y+=e,this.bg_2.y+=e,this.bottom_bg.y<=-1699&&(this.bottom_bg==this.bg_1?(this.bg_1.y=this.bg_2.y+1369,this.bottom_bg=this.bg_2):(this.bg_2.y=this.bg_1.y+1369,this.bottom_bg=this.bg_1))}}),cc._RFpop()},{}]},{},["bullet","enemy","frame_anim","game_scene","home_scene","player","star_sky"]);